<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Punjabi Language Learning Tool</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>à¨ªà©°à¨œà¨¾à¨¬à©€ à¨¸à¨¿à©±à¨–à©‹ (Learn Punjabi)</h1>
            <p class="subtitle">Practice Punjabi conversations with AI</p>
        </header>

        <!-- Scenario Selection Screen -->
        <div id="scenario-selection" class="screen active">
            <h2>Choose a Scenario</h2>
            
            <div id="scenario-list" class="scenario-list">
                <!-- Scenarios will be loaded here -->
            </div>
            
            <div class="custom-scenario">
                <h3>Or create your own scenario</h3>
                <textarea id="custom-prompt" placeholder="Describe your scenario... (e.g., 'Ordering food at a restaurant')"></textarea>
                <button id="start-custom-btn" class="btn btn-secondary">Start Custom Scenario</button>
            </div>
        </div>

        <!-- Conversation Screen -->
        <div id="conversation-screen" class="screen">
            <div class="conversation-container">
                <!-- Scenario Info -->
                <div id="scenario-info" class="scenario-info">
                    <h3 id="scenario-title"></h3>
                    <p id="scenario-description"></p>
                    <p class="persona-info">
                        Speaking with: <strong id="persona-name"></strong> (<span id="persona-role"></span>)
                    </p>
                </div>

                <!-- Conversation Area -->
                <div class="conversation-area">
                    <div id="conversation-turns" class="conversation-turns">
                        <!-- Conversation turns will appear here -->
                    </div>
                </div>

                <!-- Controls -->
                <div class="controls">
                    <button id="record-btn" class="btn btn-record" disabled>
                        <span class="record-icon">ðŸŽ¤</span>
                        <span class="record-text">Hold to Speak</span>
                    </button>
                    <button id="help-btn" class="btn btn-help">Help Mode</button>
                    <button id="end-session-btn" class="btn btn-secondary">End Session</button>
                </div>

                <!-- Metrics Display -->
                <div class="metrics-display">
                    <div class="metric">
                        <span class="metric-label">Turns:</span>
                        <span id="turn-count">0</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Words:</span>
                        <span id="word-count">0</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Confidence:</span>
                        <span id="avg-confidence">--</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">API Cost:</span>
                        <span id="api-cost">$0.00</span>
                    </div>
                </div>

                <!-- Vowel Feedback -->
                <div class="analysis-panels">
                    <section class="vowel-feedback-panel" aria-labelledby="vowel-feedback-title">
                        <div class="panel-header">
                            <h3 id="vowel-feedback-title">Vowel Pronunciation Feedback</h3>
                            <p class="panel-subtitle">Compare expected vowels with what you spoke. Colours reflect confidence &mdash; click any play button to rehear that slice.</p>
                        </div>
                        <div id="vowel-feedback-empty" class="vowel-feedback-empty" role="status">
                            Record a response to see detailed vowel analysis.
                        </div>
                        <div id="vowel-feedback-turns" class="vowel-turn-list" aria-live="polite"></div>
                    </section>
                </div>

                <!-- Account Balance Display -->
                <div class="account-balance" style="margin-top: 10px; padding: 10px; background: #f9f9f9; border-radius: 5px; text-align: center;">
                    <div style="font-size: 0.85em; color: #666;">OpenAI Account</div>
                    <div id="account-balance" style="font-size: 1.1em; font-weight: bold; color: #2196F3;">
                        Checking...
                    </div>
                    <div id="balance-note" style="font-size: 0.75em; color: #999; margin-top: 5px;"></div>
                </div>
            </div>

            <!-- Help Mode Side Panel -->
            <div id="help-panel" class="help-panel">
                <div class="help-header">
                    <h3>Help Mode</h3>
                    <button id="close-help-btn" class="btn-close">âœ•</button>
                </div>
                
                <div class="help-content">
                    <p class="help-instruction">Ask for help with grammar, vocabulary, cultural context, or alternative phrasings.</p>
                    
                    <div class="help-topics">
                        <button class="topic-btn" data-topic="grammar">Grammar</button>
                        <button class="topic-btn" data-topic="vocabulary">Vocabulary</button>
                        <button class="topic-btn" data-topic="culture">Culture</button>
                        <button class="topic-btn" data-topic="alternatives">Alternatives</button>
                    </div>
                    
                    <textarea id="help-query" placeholder="Type your question here..."></textarea>
                    <button id="ask-help-btn" class="btn btn-primary">Ask</button>
                    
                    <div id="help-response" class="help-response">
                        <!-- Help response will appear here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Session Summary Screen -->
        <div id="summary-screen" class="screen">
            <h2>Session Complete! ðŸŽ‰</h2>
            
            <div class="summary-content">
                <div class="summary-metric">
                    <h3>Words Per Minute</h3>
                    <p class="metric-value" id="summary-wpm">--</p>
                </div>
                
                <div class="summary-metric">
                    <h3>Total Words Spoken</h3>
                    <p class="metric-value" id="summary-words">--</p>
                </div>
                
                <div class="summary-metric">
                    <h3>Unique Vocabulary</h3>
                    <p class="metric-value" id="summary-vocab">--</p>
                </div>
                
                <div class="summary-metric">
                    <h3>Conversation Turns</h3>
                    <p class="metric-value" id="summary-turns">--</p>
                </div>
                
                <div class="summary-metric">
                    <h3>Average Confidence</h3>
                    <p class="metric-value" id="summary-confidence">--</p>
                </div>
                
                <div class="summary-metric">
                    <h3>API Cost (Est.)</h3>
                    <p class="metric-value" id="summary-api-cost">--</p>
                </div>
            </div>
            
            <div class="usage-details" id="usage-details" style="margin: 20px 0; padding: 15px; background: #f5f5f5; border-radius: 8px;">
                <h3 style="margin-top: 0;">API Usage Details</h3>
                <div id="usage-breakdown"></div>
            </div>
            
            <div class="confidence-rating">
                <h3>How confident do you feel speaking Punjabi now?</h3>
                <div class="rating-buttons">
                    <button class="rating-btn" data-rating="1">1</button>
                    <button class="rating-btn" data-rating="2">2</button>
                    <button class="rating-btn" data-rating="3">3</button>
                    <button class="rating-btn" data-rating="4">4</button>
                    <button class="rating-btn" data-rating="5">5</button>
                </div>
                <p class="rating-labels">
                    <span>Not confident</span>
                    <span>Very confident</span>
                </p>
            </div>
            
            <button id="new-session-btn" class="btn btn-primary">Start New Session</button>
        </div>

        <!-- Loading Indicator -->
        <div id="loading" class="loading">
            <div class="spinner"></div>
            <p>Processing...</p>
        </div>
    </div>

    <script src="/static/js/app.js"></script>
</body>
</html>

